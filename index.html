<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>PipeOps Installer</title>
    <style>
      body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif;line-height:1.5;margin:0;padding:2rem;color:#0b1220;background:#f9fbfd}
      main{max-width:900px;margin:0 auto}
      h1{font-size:1.6rem;margin:0 0 1rem}
      pre{background:#0b1220;color:#e7edf3;padding:1rem;border-radius:8px;overflow:auto}
      code{font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,monospace}
      .card{background:#fff;border:1px solid #e8eef6;border-radius:12px;padding:1rem;margin:1rem 0}
      .meta{color:#65748b;font-size:.9rem;margin:.25rem 0 1rem}
    </style>
  </head>
  <body>
    <main>
      <h1>PipeOps Installer</h1>
      <div class="meta">Version: f50e2d1 • Last updated: <span id="lastmod">loading…</span></div>
      <div class="card">
        <h2>CLI</h2>
        <p>Install the latest CLI:</p>
        <pre><code>curl -fsSL https://get.pipeops.dev/cli.sh | bash</code></pre>
        <p>Install a specific version:</p>
        <pre><code>VERSION=v1.2.3 curl -fsSL https://get.pipeops.dev/cli.sh | bash</code></pre>
        <p>Install to a custom prefix:</p>
        <pre><code>PREFIX=/opt/pipeops curl -fsSL https://get.pipeops.dev/cli.sh | bash</code></pre>
      </div>

      <div class="card">
        <h2>Kubernetes Installer</h2>
        <p>Bootstrap a cluster and install the agent (delegates to upstream installer):</p>
        <pre><code>curl -fsSL https://get.pipeops.dev/k8-install.sh | bash</code></pre>
        <p>Alias:</p>
        <pre><code>curl -fsSL https://get.pipeops.dev/agent.sh | bash</code></pre>
        <p>Pin a version:</p>
        <pre><code>VERSION=v1.2.3 curl -fsSL https://get.pipeops.dev/k8-install.sh | bash</code></pre>
      </div>

      <div class="card">
        <h2>Kubernetes Agent</h2>
        <p>Apply to an existing cluster (creates namespace if missing):</p>
        <pre><code>curl -fsSL https://get.pipeops.dev/k8-agent.sh | bash -s -- --namespace pipeops-system</code></pre>
        <p>Immutable selector error? Recreate the Deployment safely:</p>
        <pre><code>curl -fsSL https://get.pipeops.dev/k8-agent.sh | bash -s -- --namespace pipeops-system --recreate</code></pre>
        <p>Or apply a manifest directly (replace with your pinned YAML):</p>
        <pre><code>kubectl apply -f https://get.pipeops.dev/k8-agent.yaml</code></pre>
      </div>

      <p style="color:#65748b">Served via GitHub Pages. Update scripts/manifests in this repo to publish changes.</p>
    </main>
    <script>
      (function(){
        try{
          var d = new Date(document.lastModified);
          var utc = new Date(d.getTime() - d.getTimezoneOffset()*60000).toISOString().replace('T',' ').replace('Z',' UTC');
          document.getElementById('lastmod').textContent = utc;
        }catch(e){
          document.getElementById('lastmod').textContent = 'unknown';
        }
      })();
    </script>
  </body>
  </html>
